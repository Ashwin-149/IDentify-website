{% extends "base.html" %}
{% block title %}Events · IDentify{% endblock %}
{% block content %}
<div class="d-flex align-items-center mb-3">
  <i class="bi bi-calendar-event fs-3 me-2 text-primary"></i>
  <h2 class="m-0">Events</h2>
</div>

{% if events|length == 0 %}
<div class="alert alert-info">No events yet. Check back soon.</div>
{% endif %}

<div class="row g-3">
  {% for e in events %}
  <div class="col-12 col-md-6 col-lg-4">
    <div class="card h-100 shadow-sm">
      {% if e.cover_url %}
      <img src="{{ e.cover_url }}" class="card-img-top" style="object-fit:cover;height:160px;" alt="cover">
      {% endif %}
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ e.title }}</h5>
        <p class="card-text text-muted mb-1">
          <i class="bi bi-clock"></i>
          {{ e.start_at }}{% if e.end_at %} → {{ e.end_at }}{% endif %}
        </p>
        {% if e.location %}
        <p class="card-text text-muted mb-1"><i class="bi bi-geo-alt"></i> {{ e.location }}</p>
        {% endif %}
        {% if e.capacity %}
        <p class="card-text mb-3">
          <span class="badge bg-secondary">{{ e.registered_count or 0 }}/{{ e.capacity }} registered</span>
        </p>
        {% else %}
        <div class="mb-3"></div>
        {% endif %}
        <div class="mt-auto">
          <a href="{{ url_for('event_detail', slug=e.slug) }}" class="btn btn-primary w-100">
            View & Register
          </a>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
